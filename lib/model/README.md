This should become a separate lib in the future once it is consolidated